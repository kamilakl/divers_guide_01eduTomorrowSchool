# Quest 7.7 ConvertBase (компактная версия)

## Что делает функция

Переводит число `nbr` из системы `baseFrom` в систему `baseTo`. Работает только с положительными числами и корректными базами.

---

## Пример работы

```go
ConvertBase("uoi", "choumi", "01") => "1111101"
```

**Пояснение:**

* `"uoi"` в базе `"choumi"` = 125 в десятичной.
* 125 в двоичной = `"1111101"`.

---

## Основные шаги функции

1. **Проверка баз**

```go
if hasDuplicates(baseFrom) || hasDuplicates(baseTo) ||
   containsChar(baseFrom, '+') || containsChar(baseTo, '+') {
   return ""
}
```

* Проверяем уникальность символов и отсутствие запрещённых `+/-`.

2. **Перевод в десятичное число**

```go
number := 0
baseFromLen := len(baseFrom)

for i, digitRune := range nbr {
    digitValue := indexInBase(digitRune, baseFrom)
    power := len(nbr) - 1 - i
    number += digitValue * RecursivePower(baseFromLen, power)
}
```

* `indexInBase` → индекс символа в исходной базе.
* `power` → степень для веса цифры.
* `number` → десятичное значение числа.

**Пример: `"uoi"` → 125**

| Символ    | Индекс | Степень | Вклад в число |
| --------- | ------ | ------- | ------------- |
| u         | 3      | 2       | 108           |
| o         | 2      | 1       | 12            |
| i         | 5      | 0       | 5             |
| **Сумма** |        |         | **125**       |

3. **Обработка нуля**

```go
if number == 0 {
    return string(baseTo[0])
}
```

4. **Перевод из десятичного в целевую базу**

```go
resultRunes := []rune{}
baseToLen := len(baseTo)

for number > 0 {
    remainder := number % baseToLen
    resultRunes = append(resultRunes, rune(baseTo[remainder]))
    number /= baseToLen
}
```

* Остаток `%` → индекс символа в целевой базе.
* Добавляем в срез, получая цифры в обратном порядке.

5. **Разворот результата**

```go
for i, j := 0, len(resultRunes)-1; i < j; i, j = i+1, j-1 {
    resultRunes[i], resultRunes[j] = resultRunes[j], resultRunes[i]
}
```

* Меняет порядок цифр с конца на начало.

6. **Возврат строки**

```go
return string(resultRunes)
```

---

## Вспомогательные функции

* **`indexInBase(r rune, base string) int`** → возвращает индекс символа в базе или `-1`.
* **`hasDuplicates(base string) bool`** → проверяет уникальность символов.
* **`containsChar(base string, char rune) bool`** → проверяет наличие запрещённых символов.

---

## Ключевые переменные (кратко)

| Переменная    | Назначение                                |
| ------------- | ----------------------------------------- |
| `number`      | Десятичное значение числа                 |
| `baseFromLen` | Основание исходной базы                   |
| `digitRune`   | Текущий символ числа                      |
| `digitValue`  | Цифровое значение символа в исходной базе |
| `power`       | Степень для веса цифры                    |
| `baseToLen`   | Основание целевой базы                    |
| `resultRunes` | Срез для хранения символов результата     |

---

## Пример визуализации: `"uoi"` → `"1111101"`

1. Перевод в десятичное: `uoi = 125`
2. Делим на основание 2:

```
125 % 2 = 1 → '1'
62 % 2 = 0 → '0'
31 % 2 = 1 → '1'
...
```

3. Собираем в обратном порядке → `"1111101"`.

---

## Заключение:

Функция `ConvertBase` наглядно показывает, как переводить числа между системами счисления через десятичную.

Главное понять принцип: **сначала перевод в десятичное число, затем формирование числа в новой базе по остаткам от деления**.
